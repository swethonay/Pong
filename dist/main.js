"use strict";var _declaration=require("./../dist/declaration");const update=()=>{_declaration.player.ratio.py=_declaration.player.ratio.y;_declaration.bot.ratio.py=_declaration.bot.ratio.y;_declaration.player.ratio.y+=_declaration.player.ratio.speed*_declaration.player.direction;_declaration.bot.ratio.y+=_declaration.bot.ratio.dy;_declaration.ball.ratio.x+=_declaration.ball.ratio.dx;_declaration.ball.ratio.y+=_declaration.ball.ratio.dy;_declaration.bot.move();if(_declaration.ball.y-_declaration.ball.r<=0||_declaration.ball.y+_declaration.ball.r>=_declaration.height){_declaration.ball.ratio.dy*=-1}if((_declaration.ball.x-_declaration.ball.r<0||_declaration.ball.x+_declaration.ball.r>_declaration.width)&&!_declaration.ball.lost){(_declaration.ball.x-_declaration.ball.r<0?_declaration.bot:_declaration.player).points++;if(_declaration.bot.points>_declaration.props.goal||_declaration.player.points>_declaration.props.goal){_declaration.props.winner=_declaration.bot.points>_declaration.player.points?_declaration.bot:_declaration.player}_declaration.ball.lost=true;_declaration.ball.reset()}if((0,_declaration.collides)(_declaration.ball.x+_declaration.ball.dx,_declaration.ball.y)){_declaration.ball.ratio.dx*=-1;_declaration.ball.ratio.dx+=_declaration.ball.ratio.increase*Math.sign(_declaration.ball.ratio.dx);_declaration.ball.ratio.dy+=(_declaration.ball.x<_declaration.width/2?_declaration.player:_declaration.bot).dy*_declaration.ball.ratio.traction}if((0,_declaration.collides)(_declaration.ball.x,_declaration.ball.y+_declaration.ball.dy)){const hit=_declaration.ball.x<_declaration.width/2?_declaration.player:_declaration.bot;_declaration.ball.ratio.y=(_declaration.ball.y<hit.y+_declaration.paddle.h/2?hit.y-_declaration.ball.r:hit.y+_declaration.paddle.h+_declaration.ball.r)/_declaration.height;_declaration.ball.ratio.dy*=-1}_declaration.player.ratio.y=(0,_declaration.limit)(_declaration.player.ratio.y,_declaration.paddle.min,_declaration.paddle.max);_declaration.bot.ratio.y=(0,_declaration.limit)(_declaration.bot.ratio.y,_declaration.paddle.min,_declaration.paddle.max);_declaration.bot.ratio.dy=(0,_declaration.limit)(_declaration.bot.ratio.dy,-_declaration.bot.ratio.terminal,_declaration.bot.ratio.terminal)*_declaration.bot.ratio.friction;_declaration.ball.ratio.y=(0,_declaration.limit)(_declaration.ball.ratio.y,_declaration.ball.r/_declaration.height,(_declaration.height-_declaration.ball.r)/_declaration.height)};const draw=()=>{_declaration.C.clearRect(0,0,_declaration.width,_declaration.height);_declaration.C.beginPath();_declaration.C.fillRect(_declaration.player.x,_declaration.player.y,_declaration.paddle.w,_declaration.paddle.h);_declaration.C.beginPath();_declaration.C.fillRect(_declaration.bot.x,_declaration.bot.y,_declaration.paddle.w,_declaration.paddle.h);_declaration.C.strokeStyle="white";_declaration.C.lineWidth=_declaration.ball.r*2;for(let i=0;i<20;i++){_declaration.C.beginPath();_declaration.C.moveTo(_declaration.width/2,_declaration.height/20*i+_declaration.height/30);_declaration.C.lineTo(_declaration.width/2,_declaration.height/20*(i+1)-_declaration.height/30);_declaration.C.stroke()}_declaration.C.font=Math.hypot(_declaration.width,_declaration.height)*.05+"px 'Press Start 2P'";_declaration.C.beginPath();_declaration.C.fillText(_declaration.player.points,_declaration.width*.25,_declaration.height/8);_declaration.C.fillText(_declaration.bot.points,_declaration.width*.75,_declaration.height/8);if(_declaration.props.winner){const x=_declaration.width*(_declaration.props.winner.name==="Player 1"?.25:.75);const font="px 'Press Start 2P'";_declaration.C.strokeStyle="black";_declaration.C.font=Math.hypot(_declaration.width,_declaration.height)*.025+font;_declaration.C.beginPath();_declaration.C.strokeText(_declaration.props.winner.name+" Won!",x,_declaration.height/2);_declaration.C.fillText(_declaration.props.winner.name+" Won!",x,_declaration.height/2);_declaration.C.font=Math.hypot(_declaration.width,_declaration.height)*.015+font;_declaration.C.beginPath();_declaration.C.strokeText("Press Space to Restart",x,_declaration.height*.55);_declaration.C.fillText("Press Space to Restart",x,_declaration.height*.55)}else{_declaration.C.strokeStyle="black";_declaration.C.lineWidth=_declaration.ball.r/2;_declaration.C.beginPath();_declaration.C.strokeRect(_declaration.ball.x-_declaration.ball.r,_declaration.ball.y-_declaration.ball.r,_declaration.ball.r*2,_declaration.ball.r*2);_declaration.C.fillRect(_declaration.ball.x-_declaration.ball.r,_declaration.ball.y-_declaration.ball.r,_declaration.ball.r*2,_declaration.ball.r*2)}};const game=()=>{requestAnimationFrame(game);draw();if(!_declaration.props.winner){update()}};_declaration.canvas.onmousemove=(E=>_declaration.player.ratio.y=(0,_declaration.limit)((E.y-_declaration.paddle.h/2)/_declaration.height,_declaration.paddle.min,_declaration.paddle.max));onkeyup=(()=>_declaration.player.direction=0);onkeydown=_declaration.keydown;onresize=_declaration.init;onload=(()=>{_declaration.ball.reset();(0,_declaration.init)();game()});